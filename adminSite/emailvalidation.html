<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="assets/img/nur.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Email Validation</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" href="../assets/sweetalert2/sweetalert2.min.css">

    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Animation library for notifications   -->
    <link href="assets/css/animate.min.css" rel="stylesheet" />

    <!--  Light Bootstrap Table core CSS    -->
    <link href="assets/css/light-bootstrap-dashboard.css?v=1.4.0" rel="stylesheet" />


    <!--  CSS for Demo Purpose, don't include it in your project     -->
    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css" href="assets/icons/css/all.min.css">
    <link href='assets/css/robotoFont.css' rel='stylesheet' type='text/css'>
    <link href="assets/css/pe-icon-7-stroke.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="assets/css/email.css">

</head>

<body class="fondo">
    <div id="mainLoader" class='loader'></div>
    <div class="container">

        <div id="ConfirmacionDiv" class="miArticulo card text-center">
            <div class="logo">
                <img src="assets/img/nur2_iso.png" />
            </div>
            <br>
            <div id="Mensaje_txt" style="text-align: center;">Mensaje...</div>

        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        var boolModoDev = 0;

        $(document).ready(function() {

            if (location.protocol !== 'https:' && boolModoDev == 0) {
                location.replace(`https:${location.href.substring(location.protocol.length)}`);
            }

            var datos = new Object();
            datos.pLlave = findGetParameter("key");
            jQuery.ajax({
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                'type': 'POST',
                'url': "http://sisnur.nur.edu:8085/api/Registros/ValidarEmail",
                'dataType': 'json',
                'data': JSON.stringify(datos),
                'success': function(response) {
                    $("#ConfirmacionDiv").show();
                    if (response.Status)
                        $("#Mensaje_txt").html("<h5>Confirmaci贸n completada</h5> Gracias por confirmar su correo electr贸nico. <br><br><a href='https://notas2.nur.edu/'>www.notas2.nur.edu/</a>");
                    else
                        $("#Mensaje_txt").html("Lo sentimos, esta direcci贸n de verificaci贸n ha expirado. <br><br><a href='https://notas2.nur.edu/'>www.notas2.nur.edu/</a>");
                },
                "error": function() {
                    $("#ConfirmacionDiv").show();
                    $("#Mensaje_txt").html("No fue posible verificar su correo, intente registrarlo nuevamente. <br><br><a href='https://notas2.nur.edu/'>www.notas2.nur.edu/</a>");
                }
            });

            terminarMainCargado();
        });

        function findGetParameter(parameterName) {
            var result = null,
                tmp = [];
            location.search
                .substr(1)
                .split("&")
                .forEach(function(item) {
                    tmp = item.split("=");
                    if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
                });
            return result;
        }

        function comenzarMainCargado() {
            $("#mainContainer").attr("style", "display:none");
            $("#mainLoader").removeAttr("style");
        }

        function terminarMainCargado() {
            $("#mainLoader").attr("style", "display:none");
            $("#mainContainer").removeAttr("style");
        }
    </script>

</body>

</html>