<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="icon" type="image/png" href="assets/img/nur.png">
    <title>Notas y Asistencia</title>
</head>

<body>
    <div class="container-fluid">
        <h4 class="text-center">Formulario de Inscripcion</h4>
        <h4>Materias Ofertadas en Presencial</h4>
        <table id="tablaOferta" class="table">
            <thead>
                <tr>
                    <th scope="col">MATERIA</th>
                    <th scope="col">SEM</th>
                    <th scope="col">CR</th>
                    <th scope="col">LAB</th>
                    <th scope="col">DOCENTE</th>
                    <th scope="col">CODIGO</th>
                    <th scope="col">GR</th>
                    <th scope="col">HORARIO</th>
                    <th scope="col">DIAS</th>
                    <th scope="col">SE</th>
                    <th scope="col">OBS</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
        <h4>Documentos que debe presentar</h4>
        <div class="col-sm-4">
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">Documento</th>
                        <th scope="col">Estado</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>


</body>
<script src="assets/js/jquery.3.2.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {
        cargarPagina();

        function cargarPagina() {
            obtenerOferta();
        }

        function obtenerOferta() {
            var carreraId = sessionStorage.getItem("carreraId");
            var periodoOferta = sessionStorage.getItem("periodoOferta");
            var token = sessionStorage.getItem("token");
            var usuario = new Object();
            usuario.pCarreraId = carreraId;
            usuario.pPeriodoId = periodoOferta;
            jQuery.ajax({
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer ' + token
                },
                'type': 'POST',
                'data': JSON.stringify(usuario),
                'url': "http://sisnur.nur.edu:8085/api/Registros/GetAlumnoOferta",
                'dataType': 'json',
                'success': cargarOferta
            });
        }
    })

    function cargarOferta(resultado) {
        resultado.Data.forEach(function(element) {
            const {
                LGRUPO_ID,
                LCENTRO_ID,
                SCENTRO_DSC,
                SMATERIA_DSC,
                LSEMESTRE,
                LCREDITOS,
                LLABORATORIO,
                DOCENTE,
                SCODMATERIA,
                CASILLA,
                SCODGRUPO,
                SSEMANA,
                LESTADOGRUPO_ID,
                SESTADOGRUPO_DSC,
                SOBS1,
                HORARIO
            } = element;
            var tr = $("<tr ></tr>")
            var td1 = $("<td></td>").text(SMATERIA_DSC);
            var td2 = $("<td></td>").text(LSEMESTRE);
            var td3 = $("<td></td>").text(LCREDITOS);
            var td4 = $("<td></td>").text(LLABORATORIO == 1 ? "*" : "");
            var td5 = $("<td></td>").text(DOCENTE);
            var td6 = $("<td></td>").text(SCODMATERIA);
            var td7 = $("<td></td>").text(SCODGRUPO);
            var td8 = $("<td></td>").text(HORARIO);
            var td9 = $("<td></td>").text("Dias");
            var td10 = $("<td></td>").text("SE");
            var td11 = $("<td></td>").text("OBS");
            tr.append(td1)
            tr.append(td2)
            tr.append(td3)
            tr.append(td4)
            tr.append(td5)
            tr.append(td6)
            tr.append(td7)
            tr.append(td8)
            tr.append(td9)
            tr.append(td10)
            tr.append(td11)
            $('#tablaOferta').append(tr);
        });
    }
</script>

</html>